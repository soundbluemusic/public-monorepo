{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{mkdirSync,writeFileSync}from\"node:fs\";import{dirname,join}from\"node:path\";import{fileURLToPath}from\"node:url\";import{allConcepts}from\"../app/data/concepts/index.js\";const __dirname=dirname(fileURLToPath(import.meta.url));const PUBLIC_DIR=join(__dirname,\"../public\");const CONCEPTS_DIR=join(PUBLIC_DIR,\"concepts\");const OUTPUT_PATH=join(PUBLIC_DIR,\"search-index.json\");const CONCEPTS_INDEX_PATH=join(CONCEPTS_DIR,\"index.json\");const CONCEPT_NAMES_PATH=join(PUBLIC_DIR,\"concept-names.json\");function getDefinition(content){if(!content)return\"\";if(typeof content===\"string\")return content;return content.definition??\"\"}__name(getDefinition,\"getDefinition\");function generateSearchIndex(){console.log(`Generating search index for ${allConcepts.length} concepts...`);const searchIndex=[];const conceptsByField=new Map;const conceptIdToField={};const conceptNames={};for(const concept of allConcepts){searchIndex.push({id:concept.id,name:concept.name,field:concept.field,subfield:concept.subfield,difficulty:concept.difficulty,tags:concept.tags,def:{ko:(getDefinition(concept.content.ko)||getDefinition(concept.content.en)).slice(0,100),en:(getDefinition(concept.content.en)||getDefinition(concept.content.ko)).slice(0,100)}});const fieldList=conceptsByField.get(concept.field)||[];fieldList.push(concept);conceptsByField.set(concept.field,fieldList);conceptIdToField[concept.id]=concept.field;conceptNames[concept.id]=concept.name}mkdirSync(PUBLIC_DIR,{recursive:true});mkdirSync(CONCEPTS_DIR,{recursive:true});const searchIndexJson=JSON.stringify(searchIndex);writeFileSync(OUTPUT_PATH,searchIndexJson,\"utf-8\");console.log(`\\u2713 Generated search-index.json (${(Buffer.byteLength(searchIndexJson)/1024).toFixed(1)} KB, ${searchIndex.length} items)`);console.log(\"\\nGenerating field-based concept files...\");const fieldStats={};for(const[field,concepts]of conceptsByField.entries()){const fieldPath=join(CONCEPTS_DIR,`${field}.json`);const fieldJson=JSON.stringify(concepts);writeFileSync(fieldPath,fieldJson,\"utf-8\");const fieldSizeKB=(Buffer.byteLength(fieldJson)/1024).toFixed(1);fieldStats[field]={count:concepts.length,sizeKB:fieldSizeKB};console.log(`  \\u2713 ${field}.json (${fieldSizeKB} KB, ${concepts.length} concepts)`)}const conceptsIndex={fields:Array.from(conceptsByField.keys()),stats:fieldStats,totalConcepts:allConcepts.length,conceptIdToField,generatedAt:new Date().toISOString()};const conceptsIndexJson=JSON.stringify(conceptsIndex,null,2);writeFileSync(CONCEPTS_INDEX_PATH,conceptsIndexJson,\"utf-8\");console.log(`\n\\u2713 Generated concepts/index.json (${(Buffer.byteLength(conceptsIndexJson)/1024).toFixed(1)} KB, ${conceptsByField.size} fields)`);const conceptNamesJson=JSON.stringify(conceptNames);writeFileSync(CONCEPT_NAMES_PATH,conceptNamesJson,\"utf-8\");console.log(`\\u2713 Generated concept-names.json (${(Buffer.byteLength(conceptNamesJson)/1024).toFixed(1)} KB, ${Object.keys(conceptNames).length} items)`)}__name(generateSearchIndex,\"generateSearchIndex\");generateSearchIndex();\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/home/user/public-monorepo/apps/roots/scripts/generate-search-index.ts"],"sourcesContent":[null]}}