---
title: "@soundblue/i18n"
description: URL-based internationalization with React Router integration - Layer 2 domain package
sidebar:
  order: 6
---

# @soundblue/i18n

**Layer 2 (Domain)** — URL-based internationalization for React Router v7 SSG apps.

## Overview

This package provides URL path-based language routing (e.g., `/ko/entry/hello`) and meta tag generation for SEO-friendly multilingual sites.

| Property | Value |
|----------|-------|
| Layer | 2 (Domain) |
| Dependencies | @soundblue/core, @soundblue/seo |
| React Required | Yes (for hooks) |

## Installation

```json
{
  "dependencies": {
    "@soundblue/i18n": "workspace:*"
  }
}
```

## URL Routing Pattern

```
/entry/hello       → English (default)
/ko/entry/hello    → Korean
```

All routes are duplicated for each language at build time.

## Exports

### `/core`

Core i18n utilities without React dependencies.

```typescript
import {
  getLocaleFromPath,
  stripLocaleFromPath,
  addLocaleToPath,
  generateI18nRoutes
} from '@soundblue/i18n/core';

// Extract locale from URL path
getLocaleFromPath('/ko/entry/hello');  // 'ko'
getLocaleFromPath('/entry/hello');     // 'en'

// Remove locale prefix
stripLocaleFromPath('/ko/entry/hello');  // '/entry/hello'
stripLocaleFromPath('/entry/hello');     // '/entry/hello'

// Add locale prefix
addLocaleToPath('/entry/hello', 'ko');  // '/ko/entry/hello'
addLocaleToPath('/entry/hello', 'en');  // '/entry/hello'

// Generate i18n routes for SSG
const entries = [{ id: 'hello' }, { id: 'world' }];
generateI18nRoutes(entries, (e) => `/entry/${e.id}`);
// ['/entry/hello', '/ko/entry/hello', '/entry/world', '/ko/entry/world']
```

### `/utils`

Route extraction utilities for SSG.

```typescript
import { extractStaticRoutes } from '@soundblue/i18n/utils';

// Extract static routes from route config
const routes = [
  { path: '/', element: <Home /> },
  { path: '/about', element: <About /> },
  { path: '/entry/:entryId', element: <Entry /> },
];

extractStaticRoutes(routes);
// ['/', '/ko', '/about', '/ko/about']
// (excludes dynamic routes like /entry/:entryId)
```

### `/react`

React hooks for i18n.

```typescript
import { useI18n, I18nProvider } from '@soundblue/i18n/react';

// Provider (wrap your app)
function App() {
  return (
    <I18nProvider>
      <Routes />
    </I18nProvider>
  );
}

// Hook usage
function MyComponent() {
  const { locale, t, localePath } = useI18n();

  return (
    <div>
      <p>Current locale: {locale}</p>
      <p>{t('greeting')}</p>
      <Link to={localePath('/about')}>
        {t('about')}
      </Link>
    </div>
  );
}
```

#### `useI18n` Return Values

| Property | Type | Description |
|----------|------|-------------|
| `locale` | `'en' \| 'ko'` | Current locale |
| `t` | `(key: string) => string` | Translation function |
| `localePath` | `(path: string) => string` | Add locale prefix to path |
| `switchLocale` | `(locale: Language) => void` | Change language |

### `/meta`

Meta tag generation for SEO.

```typescript
import { metaFactory, dynamicMetaFactory } from '@soundblue/i18n/meta';

// Static routes
export const meta = metaFactory({
  ko: { title: '소개 - Context', description: '한국어 사전 소개' },
  en: { title: 'About - Context', description: 'About Korean Dictionary' },
}, 'https://context.soundbluemusic.com');

// Dynamic routes with loader data
export const meta = dynamicMetaFactory<typeof loader>({
  getTitle: (data) => `${data.entry.word} - Context`,
  getDescription: (data) => data.entry.translations.explanation,
  baseUrl: 'https://context.soundbluemusic.com',
});
```

### `/codegen`

Build-time code generation for Paraglide.

```typescript
import { generateMessages } from '@soundblue/i18n/codegen';

// Generate message files from JSON
await generateMessages({
  inputDir: 'project.inlang/messages',
  outputDir: 'app/paraglide',
});
```

## SSG Configuration

```typescript
// react-router.config.ts
import { extractStaticRoutes, generateI18nRoutes } from '@soundblue/i18n';

export default {
  ssr: false,
  async prerender() {
    const staticRoutes = extractStaticRoutes(routes);
    const entryRoutes = generateI18nRoutes(entries, (e) => `/entry/${e.id}`);
    return [...staticRoutes, ...entryRoutes];
  },
} satisfies Config;
```

## SEO Output

The meta factories generate proper SEO tags:

```html
<!-- /entry/hello (English page) -->
<title>Hello - Context</title>
<meta name="description" content="A common greeting in Korean" />
<link rel="canonical" href="https://context.soundbluemusic.com/entry/hello" />
<link rel="alternate" hreflang="en" href="https://context.soundbluemusic.com/entry/hello" />
<link rel="alternate" hreflang="ko" href="https://context.soundbluemusic.com/ko/entry/hello" />
<link rel="alternate" hreflang="x-default" href="https://context.soundbluemusic.com/entry/hello" />
```

## Language Switching

```typescript
import { useI18n } from '@soundblue/i18n/react';
import { LanguageToggle } from '@soundblue/ui/components';

function Header() {
  const { locale, switchLocale } = useI18n();

  return (
    <LanguageToggle
      locale={locale}
      onSwitch={switchLocale}
    />
  );
}
```
